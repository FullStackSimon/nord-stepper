{"version":3,"file":"DirectionController-ChvNGESZ.js","sources":["../src/common/controllers/DirectionController.ts"],"sourcesContent":["import { ReactiveController, ReactiveControllerHost, isServer } from \"lit\"\n\nexport type WritingDirection = \"ltr\" | \"rtl\"\n\nexport class DirectionController implements ReactiveController {\n  // these are all static as we only want a single observer on <html>\n  private static hosts = new Set<ReactiveControllerHost>()\n  private static observer?: MutationObserver\n\n  // eslint-disable-next-line class-methods-use-this\n  get dir(): WritingDirection {\n    if (!isServer && document.documentElement.dir) {\n      return document.documentElement.dir as WritingDirection\n    }\n\n    return \"ltr\"\n  }\n\n  get isLTR() {\n    return this.dir === \"ltr\"\n  }\n\n  get isRTL() {\n    return this.dir === \"rtl\"\n  }\n\n  constructor(private host: ReactiveControllerHost) {\n    this.host.addController(this)\n  }\n\n  hostConnected() {\n    if (!DirectionController.observer) {\n      DirectionController.observer = new MutationObserver(DirectionController.observe)\n      DirectionController.observer.observe(document.documentElement, { attributes: true, attributeFilter: [\"dir\"] })\n    }\n\n    if (!DirectionController.hosts.has(this.host)) {\n      DirectionController.hosts.add(this.host)\n    }\n  }\n\n  hostDisconnected() {\n    DirectionController.hosts.delete(this.host)\n  }\n\n  private static observe() {\n    DirectionController.hosts.forEach(host => host.requestUpdate())\n  }\n}\n"],"names":["DirectionController","dir","isServer","document","documentElement","isLTR","this","isRTL","constructor","host","addController","hostConnected","observer","MutationObserver","observe","attributes","attributeFilter","hosts","has","add","hostDisconnected","delete","forEach","requestUpdate","Set"],"mappings":"qCAIaA,EAMX,OAAIC,GACF,OAAKC,GAAYC,SAASC,gBAAgBH,IACjCE,SAASC,gBAAgBH,IAG3B,KACR,CAED,SAAII,GACF,MAAoB,QAAbC,KAAKL,GACb,CAED,SAAIM,GACF,MAAoB,QAAbD,KAAKL,GACb,CAED,WAAAO,CAAoBC,GAAAH,KAAIG,KAAJA,EAClBH,KAAKG,KAAKC,cAAcJ,KACzB,CAED,aAAAK,GACOX,EAAoBY,WACvBZ,EAAoBY,SAAW,IAAIC,iBAAiBb,EAAoBc,SACxEd,EAAoBY,SAASE,QAAQX,SAASC,gBAAiB,CAAEW,YAAY,EAAMC,gBAAiB,CAAC,UAGlGhB,EAAoBiB,MAAMC,IAAIZ,KAAKG,OACtCT,EAAoBiB,MAAME,IAAIb,KAAKG,KAEtC,CAED,gBAAAW,GACEpB,EAAoBiB,MAAMI,OAAOf,KAAKG,KACvC,CAEO,cAAOK,GACbd,EAAoBiB,MAAMK,SAAQb,GAAQA,EAAKc,iBAChD,EAzCcvB,EAAAiB,MAAQ,IAAIO"}