{"version":3,"file":"collection-Dvg2XbxV.js","sources":["../src/common/collection.ts"],"sourcesContent":["/**\n * Groups an array objects by property value\n * @param array the collection of objects to group\n * @param key the property to group by\n * @returns a Map keyed by property value, where values are are an array of objects with that property value.\n */\nexport function groupBy<TObject extends Record<any, any>, TKey extends keyof TObject>(\n  array: Array<TObject>,\n  key: TKey\n) {\n  const grouped = new Map<TObject[TKey], TObject[]>()\n\n  for (const item of array) {\n    const value = item[key]\n    const collection = grouped.get(value) ?? []\n\n    if (!grouped.has(value)) {\n      grouped.set(value, [])\n    }\n    collection.push(item)\n    grouped.set(value, collection)\n  }\n\n  return grouped\n}\n\n/**\n * Split an array into chunks of the given size\n * @param array\n * @param chunkSize\n * @returns\n */\nexport function chunk<T>(array: T[], chunkSize: number): T[][] {\n  const result = []\n\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize))\n  }\n\n  return result\n}\n\n/**\n * maps over an array, starting at the given offset and wrapping around.\n * @param array\n * @param startingOffset\n * @param mapFn\n * @returns\n */\nexport function mapWithOffset<T, U>(array: T[], startingOffset: number, mapFn: (item: T, i: number) => U): U[] {\n  return array.map((_, i) => {\n    const adjustedIndex = (i + startingOffset) % array.length\n    return mapFn(array[adjustedIndex], adjustedIndex)\n  })\n}\n"],"names":["groupBy","array","key","grouped","Map","item","value","collection","_a","get","has","set","push","chunk","chunkSize","result","i","length","slice","mapWithOffset","startingOffset","mapFn","map","_","adjustedIndex"],"mappings":"AAMgB,SAAAA,EACdC,EACAC,SAEA,MAAMC,EAAU,IAAIC,IAEpB,IAAK,MAAMC,KAAQJ,EAAO,CACxB,MAAMK,EAAQD,EAAKH,GACbK,EAAmC,QAAtBC,EAAAL,EAAQM,IAAIH,UAAU,IAAAE,EAAAA,EAAA,GAEpCL,EAAQO,IAAIJ,IACfH,EAAQQ,IAAIL,EAAO,IAErBC,EAAWK,KAAKP,GAChBF,EAAQQ,IAAIL,EAAOC,EACpB,CAED,OAAOJ,CACT,CAQgB,SAAAU,EAASZ,EAAYa,GACnC,MAAMC,EAAS,GAEf,IAAK,IAAIC,EAAI,EAAGA,EAAIf,EAAMgB,OAAQD,GAAKF,EACrCC,EAAOH,KAAKX,EAAMiB,MAAMF,EAAGA,EAAIF,IAGjC,OAAOC,CACT,UASgBI,EAAoBlB,EAAYmB,EAAwBC,GACtE,OAAOpB,EAAMqB,KAAI,CAACC,EAAGP,KACnB,MAAMQ,GAAiBR,EAAII,GAAkBnB,EAAMgB,OACnD,OAAOI,EAAMpB,EAAMuB,GAAgBA,EAAc,GAErD"}