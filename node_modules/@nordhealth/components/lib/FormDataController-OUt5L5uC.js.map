{"version":3,"file":"FormDataController-OUt5L5uC.js","sources":["../src/common/controllers/FormDataController.ts"],"sourcesContent":["import { ReactiveController, ReactiveControllerHost } from \"lit\"\nimport { InputMixinInterface } from \"../mixins/InputMixin.js\"\n\ntype FormDataOptions = {\n  value: () => string | undefined\n}\n\nexport class FormDataController implements ReactiveController {\n  private _form: HTMLFormElement | null = null\n\n  constructor(\n    private host: ReactiveControllerHost & InputMixinInterface,\n    private options: FormDataOptions\n  ) {\n    host.addController(this)\n  }\n\n  hostConnected() {\n    this.listen(this.host.form)\n  }\n\n  hostUpdated() {\n    this.listen(this.host.form)\n  }\n\n  hostDisconnected() {\n    this.cleanup()\n  }\n\n  private listen(form: HTMLFormElement | null) {\n    if (this._form !== form) {\n      this.cleanup()\n      this._form = form\n      this._form?.addEventListener(\"formdata\", this.handleFormData)\n    }\n  }\n\n  private cleanup() {\n    this._form?.removeEventListener(\"formdata\", this.handleFormData)\n    this._form = null\n  }\n\n  private handleFormData = (e: FormDataEvent) => {\n    const { disabled, name } = this.host\n\n    if (disabled) {\n      return\n    }\n    if (!name) {\n      return\n    }\n\n    const value = this.options.value()\n    if (value != null) {\n      e.formData.append(name, value)\n    }\n  }\n}\n"],"names":["FormDataController","constructor","host","options","this","_form","handleFormData","e","disabled","name","value","formData","append","addController","hostConnected","listen","form","hostUpdated","hostDisconnected","cleanup","_a","addEventListener","removeEventListener"],"mappings":"MAOaA,EAGX,WAAAC,CACUC,EACAC,GADAC,KAAIF,KAAJA,EACAE,KAAOD,QAAPA,EAJFC,KAAKC,MAA2B,KAkChCD,KAAAE,eAAkBC,IACxB,MAAMC,SAAEA,EAAQC,KAAEA,GAASL,KAAKF,KAEhC,GAAIM,EACF,OAEF,IAAKC,EACH,OAGF,MAAMC,EAAQN,KAAKD,QAAQO,QACd,MAATA,GACFH,EAAEI,SAASC,OAAOH,EAAMC,EACzB,EAzCDR,EAAKW,cAAcT,KACpB,CAED,aAAAU,GACEV,KAAKW,OAAOX,KAAKF,KAAKc,KACvB,CAED,WAAAC,GACEb,KAAKW,OAAOX,KAAKF,KAAKc,KACvB,CAED,gBAAAE,GACEd,KAAKe,SACN,CAEO,MAAAJ,CAAOC,SACTZ,KAAKC,QAAUW,IACjBZ,KAAKe,UACLf,KAAKC,MAAQW,EACH,QAAVI,EAAAhB,KAAKC,aAAK,IAAAe,GAAAA,EAAEC,iBAAiB,WAAYjB,KAAKE,gBAEjD,CAEO,OAAAa,SACI,QAAVC,EAAAhB,KAAKC,aAAK,IAAAe,GAAAA,EAAEE,oBAAoB,WAAYlB,KAAKE,gBACjDF,KAAKC,MAAQ,IACd"}