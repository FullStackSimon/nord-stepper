{"version":3,"file":"LightSlotController-Coyy4nqS.js","sources":["../src/common/controllers/LightSlotController.ts"],"sourcesContent":["import { nothing, ReactiveControllerHost, isServer } from \"lit\"\nimport { LightDomController } from \"./LightDomController.js\"\nimport { SlotController } from \"./SlotController.js\"\n\ntype LightSlotOptions = {\n  slotName: string\n  render: () => unknown\n  syncLightDom: (element: Element) => void\n}\n\n/**\n * Handles cases where a component needs to render to light DOM,\n * and potentially sync component properties to user-supplied content.\n */\nexport class LightSlotController extends SlotController {\n  private renderHook?: Comment\n  private lightDom?: LightDomController\n\n  constructor(\n    host: ReactiveControllerHost & HTMLElement,\n    private options: LightSlotOptions\n  ) {\n    super(host, options.slotName)\n\n    if (isServer) {\n      return\n    }\n\n    // we need a node to hook onto for rendering\n    // without this, multiple controllers rendering to the light DOM\n    // will overwrite each others' content\n    this.renderHook = document.createComment(this.slotName)\n\n    this.lightDom = new LightDomController(host, {\n      render: () => (this.hasContent ? nothing : this.options.render()),\n      renderOptions: { renderBefore: this.renderHook },\n    })\n  }\n\n  hostConnected() {\n    super.hostConnected()\n\n    if (this.renderHook) {\n      this.host.appendChild(this.renderHook)\n      this.syncLightDom()\n    }\n  }\n\n  protected override onChange = () => {\n    this.syncLightDom()\n  }\n\n  private syncLightDom() {\n    const node = this.content\n\n    if (node) {\n      this.options.syncLightDom(node)\n    }\n  }\n}\n"],"names":["LightSlotController","SlotController","constructor","host","options","super","slotName","this","onChange","syncLightDom","isServer","renderHook","document","createComment","lightDom","LightDomController","render","hasContent","nothing","renderOptions","renderBefore","hostConnected","appendChild","node","content"],"mappings":"kJAcM,MAAOA,UAA4BC,EAIvC,WAAAC,CACEC,EACQC,GAERC,MAAMF,EAAMC,EAAQE,UAFZC,KAAOH,QAAPA,EA4BSG,KAAQC,SAAG,KAC5BD,KAAKE,cAAc,EAzBfC,IAOJH,KAAKI,WAAaC,SAASC,cAAcN,KAAKD,UAE9CC,KAAKO,SAAW,IAAIC,EAAmBZ,EAAM,CAC3Ca,OAAQ,IAAOT,KAAKU,WAAaC,EAAUX,KAAKH,QAAQY,SACxDG,cAAe,CAAEC,aAAcb,KAAKI,cAEvC,CAED,aAAAU,GACEhB,MAAMgB,gBAEFd,KAAKI,aACPJ,KAAKJ,KAAKmB,YAAYf,KAAKI,YAC3BJ,KAAKE,eAER,CAMO,YAAAA,GACN,MAAMc,EAAOhB,KAAKiB,QAEdD,GACFhB,KAAKH,QAAQK,aAAac,EAE7B"}